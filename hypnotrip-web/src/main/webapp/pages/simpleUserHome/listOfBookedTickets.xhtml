<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template/template.xhtml">

	<h:head>
		<ui:define name="title">Manage Tickets</ui:define>

	</h:head>
	<ui:define name="content">


		<h:form id="ticketsBooked">
			<div id="content-block" class="gallery-block">

				<div class="custom-container gallery-container">
					<div class="container">
						<br /> <br />
						<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
			
						<ui:repeat var="ticket" value="#{listOfUserBookingBean.doFindAllBookedtickets()}">
							<div class="gallery-box clearfix">
								<div class="gallery-a gallery-info">
									Price
									<h:outputLabel value="#{ticket.price}" />
									$<br />Places :
									<h:outputLabel value="#{ticket.numberOfPlaces}" />

								</div>
								<div class="gallery-info">
									<h3>
										<h:outputLabel value="#{ticket.label}" />
									</h3>
									<p>
										<h:outputLabel value="#{ticket.description}" />
										<br /> Booked :
										<h:outputLabel
											value="#{listOfUserBookingBean.numberOfReserverTicket(ticket)}" />
									</p>
								</div>
								<div class="gallery-btn">
									<h:commandLink class="btn-login btn color-1 size-2 hover-2"
										action="#{listOfUserBookingBean.doBook()}">
										Book<f:setPropertyActionListener value="#{ticket}"
											target="#{listOfUserBookingBean.selectedTicket}"></f:setPropertyActionListener>
									</h:commandLink>


									<p:commandLink class="btn-login btn color-1 size-2 hover-2"
										action="#{listOfUserBookingBean.doCancelBooking()}">
										Cancel <f:setPropertyActionListener value="#{ticket}"
											target="#{listOfUserBookingBean.selectedTicket}"></f:setPropertyActionListener>
									</p:commandLink>


								</div>
							</div>
						</ui:repeat>
						<br /> <br />
					</div>
				</div>

			</div>
			<center>
				<h:commandLink action="home?faces-redirect=true"
					value="Go back"
					class="be-register btn color-3 size-1 hover-1" />
			</center>
		</h:form>

	</ui:define>

</ui:composition>